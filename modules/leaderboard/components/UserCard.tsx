import React, { memo } from "react";

import dayjs from "dayjs";

import { cn } from "@lib/utils/style";
import Image from "@modules/common/components/Image";
import Paragraph from "@modules/common/components/typography/Paragraph";
import images from "@resources/images";
import { paragraphVariants } from "@resources/variants";

type Props = {
  rank: number;
  data: any;
  sx?: string;
};

function UserCard({ rank, data, sx }: Props) {
  return (
    <div
      className={cn(
        "border-border-light flex items-center rounded border p-2 sm:px-[15px] sm:py-2.5",
        sx
      )}
    >
      <div
        className={cn(
          "relative mr-2 flex h-[50px] w-[60px] items-center justify-center rounded sm:mr-5 md:w-[84px]",
          { "bg-gradient-to-r from-[#FFC878] to-[#F9E4B8]": rank == 1 },
          { "bg-gradient-to-r from-[#F3F3F3] to-[#D8D8D8]": rank == 2 },
          { "bg-gradient-to-r from-[#AC8D61] to-[#F6ECD8]": rank == 3 }
        )}
      >
        {rank < 4 && (
          <RankImg
            sx={cn(
              "absolute",
              { "[&>path]:fill-[#9D8153]": rank == 1 },
              { "[&>path]:fill-[#858585]": rank == 2 },
              { "[&>path]:fill-[#777572]": rank == 3 }
            )}
          />
        )}
        <Paragraph
          content={rank}
          variant={paragraphVariants.title}
          sx={cn(
            "!font-bold text-[#777572] mb-3",
            { "text-[#9D8153]": rank == 1 },
            { "text-[#858585]": rank == 2 },
            { "text-[#777572]": rank == 3 }
          )}
        />
      </div>
      <div className="grid w-full grid-cols-2 items-center sm:grid-cols-3">
        <div className="flex w-full items-center gap-2.5 sm:w-[200px]">
          <Image
            path={data?.userData?.profileImage}
            onErrorImage={images.placeholders.image}
            alt="user"
            className="h-[30px] w-[30px] rounded-full border-2 border-black object-cover sm:h-[50px] sm:w-[50px]"
          />
          <Paragraph
            content={data?.userData?.firstName}
            variant={paragraphVariants.regular}
            sx="truncate text-black capitalize"
          />
        </div>
        <Paragraph
          content={data?.totalPoints ? `${data?.totalPoints} Pts` : "Unlisted"}
          variant={paragraphVariants.regular}
          sx="text-content-dark-secondary truncate hidden sm:flex"
        />
        <div className="flex flex-col items-end gap-[10px] sm:items-start">
          <div className="flex w-max gap-[10px] sm:hidden">
            <Paragraph
              content={`${data?.totalPoints} Pts`}
              variant={paragraphVariants.regular}
              sx="text-content-dark-secondary truncate"
            />
          </div>
          <div className="flex w-max justify-end gap-[10px] sm:w-full">
            <Paragraph
              content={dayjs(data?.enrollmentDate).format("MMM DD, YYYY")}
              variant={paragraphVariants.regular}
              sx="text-content-dark-secondary truncate ml-auto"
            />
          </div>
        </div>
      </div>
    </div>
  );
}

const RankImg = ({ sx }: { sx: string }) => {
  return (
    <svg
      className={sx}
      width="44"
      height="23"
      viewBox="0 0 44 23"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        opacity="0.4"
        d="M38.7256 12.8147C39.2658 11.53 39.571 10.1736 39.629 8.79943C40.8476 8.68273 41.9734 8.15423 42.7829 7.31883C43.5923 6.48342 44.0263 5.40218 43.9988 4.28969C43.0408 4.30987 42.1105 4.58555 41.3238 5.08241C40.5371 5.57927 39.9288 6.27533 39.5747 7.08389C39.5053 6.40889 39.3779 5.73986 39.1938 5.08288C39.5273 4.1584 39.5167 3.15998 39.1637 2.24147C38.8108 1.32297 38.135 0.535358 37.2405 0C36.5931 0.895972 36.3248 1.97456 36.4854 3.03625C36.646 4.09795 37.2245 5.07092 38.114 5.7752C38.3072 6.57181 38.4083 7.38456 38.4155 8.20024C38.1451 7.38348 37.6209 6.65494 36.9057 6.10208C36.1906 5.54921 35.315 5.19551 34.3839 5.08344C34.2218 6.2003 34.5342 7.33132 35.2576 8.24648C35.981 9.16164 37.0611 9.79223 38.2782 10.01C38.0124 11.6272 37.3703 13.1744 36.3945 14.5486C36.4677 13.5789 36.1879 12.6142 35.5983 11.803C35.0087 10.9918 34.142 10.379 33.1314 10.0588C32.7381 11.0869 32.7749 12.2105 33.2348 13.2155C33.6947 14.2206 34.5456 15.0369 35.6255 15.5092C35.1301 16.0749 34.5784 16.5979 33.9774 17.0717C33.0345 17.8109 31.978 18.4213 30.8412 18.8837C31.5929 18.0213 31.9648 16.936 31.8847 15.8385C31.8046 14.7411 31.2782 13.7098 30.4079 12.945C29.5356 13.7645 29.0447 14.8576 29.0371 15.9973C29.0295 17.1369 29.5057 18.2354 30.367 19.0644C29.4514 19.3999 28.4961 19.6379 27.5201 19.7734C27.3677 19.7941 27.2296 19.8663 27.1335 19.9756C27.0373 20.0849 26.9903 20.2232 27.0017 20.3627C27.0131 20.5022 27.0822 20.6326 27.1951 20.7278C27.308 20.823 27.4564 20.8759 27.6104 20.8759C27.6411 20.8758 27.6717 20.8736 27.702 20.8692C28.569 20.7501 29.4216 20.5569 30.2485 20.2922C30.7331 21.3348 31.6387 22.1696 32.7795 22.6252C33.9203 23.0807 35.2098 23.1226 36.3836 22.7422C36.0323 21.8497 35.3755 21.0829 34.5093 20.5542C33.6432 20.0255 32.6133 19.7627 31.5706 19.8044C32.6262 19.3505 33.6153 18.7788 34.5152 18.1027C35.4995 18.7747 36.7271 19.0841 37.9521 18.969C39.177 18.8539 40.3088 18.3227 41.1208 17.4819C40.4491 16.9492 39.6297 16.5938 38.7513 16.454C37.873 16.3143 36.9692 16.3956 36.1382 16.6893C36.7907 16.0195 37.3635 15.2892 37.8473 14.5103C39.1071 14.7752 40.4312 14.5754 41.529 13.9548C42.6269 13.3342 43.4088 12.3435 43.7033 11.2001C42.7905 11.007 41.8357 11.0566 40.9531 11.3429C40.0704 11.6292 39.2972 12.1402 38.7256 12.8147Z"
        fill="white"
      />
      <path
        opacity="0.4"
        d="M16.4799 19.7778C15.504 19.6422 14.5488 19.4043 13.6333 19.0687C14.4944 18.2395 14.9707 17.1407 14.9631 16.0008C14.9555 14.8609 14.4646 13.7675 13.5924 12.9479C12.7221 13.7129 12.1957 14.7444 12.1157 15.842C12.0356 16.9397 12.4075 18.0253 13.159 18.8879C12.0223 18.4254 10.9659 17.8149 10.0231 17.0755C9.42214 16.6016 8.8705 16.0784 8.37517 15.5126C9.45493 15.0403 10.3057 14.2237 10.7656 13.2185C11.2255 12.2132 11.2623 11.0894 10.869 10.061C9.85852 10.3813 8.99183 10.9942 8.40229 11.8056C7.81275 12.617 7.53302 13.5819 7.60613 14.5518C6.63048 13.1773 5.98839 11.6298 5.72261 10.0122C6.93965 9.7944 8.01966 9.16367 8.74301 8.24831C9.46636 7.33294 9.77873 6.20168 9.61661 5.08457C8.68618 5.19717 7.81125 5.55117 7.09676 6.10412C6.38226 6.65707 5.85851 7.38551 5.58833 8.20206C5.59562 7.38621 5.69667 6.57327 5.88984 5.77648C6.77956 5.07227 7.3584 4.09919 7.51931 3.03725C7.68021 1.9753 7.41228 0.89636 6.76508 0C5.87068 0.535477 5.19495 1.32327 4.84201 2.24197C4.48907 3.16068 4.47852 4.15932 4.81198 5.08401C4.62782 5.74113 4.50048 6.41032 4.43112 7.08546C4.07695 6.27545 3.4679 5.57818 2.68006 5.08073C1.89221 4.58328 0.960482 4.30771 0.00123888 4.28842C-0.0263476 5.40116 0.407635 6.48265 1.21705 7.31824C2.02647 8.15383 3.15216 8.68244 4.3707 8.79917C4.42869 10.1737 4.73382 11.5303 5.27401 12.8154C4.70267 12.1398 3.92921 11.6279 3.04611 11.341C2.16301 11.0541 1.20763 11.0043 0.294204 11.1976C0.588684 12.3413 1.37057 13.3322 2.46834 13.9529C3.5661 14.5736 4.8901 14.7735 6.14985 14.5086C6.63356 15.2876 7.20639 16.0181 7.85882 16.688C7.02788 16.3951 6.12454 16.3144 5.24672 16.4547C4.36889 16.5949 3.55007 16.9507 2.87901 17.4836C3.69091 18.3246 4.82264 18.8559 6.04749 18.971C7.27235 19.0862 8.49987 18.7767 9.48416 18.1045C10.3841 18.7796 11.3732 19.3503 12.4285 19.8033C11.3859 19.7616 10.3561 20.0244 9.48999 20.5532C8.62389 21.0821 7.96709 21.849 7.6159 22.7417C8.78908 23.1224 10.0782 23.081 11.2188 22.626C12.3595 22.1709 13.2653 21.3368 13.7505 20.2945C14.5776 20.561 15.4306 20.7559 16.298 20.8766C16.3283 20.881 16.3589 20.8832 16.3896 20.8833C16.5436 20.8833 16.692 20.8304 16.8049 20.7352C16.9178 20.64 16.9869 20.5095 16.9983 20.37C17.0097 20.2304 16.9627 20.0921 16.8665 19.9828C16.7704 19.8735 16.6323 19.8012 16.4799 19.7805V19.7778Z"
        fill="white"
      />
    </svg>
  );
};

export default memo(UserCard);
